import { createContext, useContext, useState, ReactNode } from "react";

export type Language = "en" | "sv" | "fr" | "es";

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string, params?: Record<string, string | number>) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

const translations: Record<Language, Record<string, string>> = {
  en: {
    // StartPage
    "start.welcome": "Welcome to CarbSmart!",
    "start.description": "Take photos of meals and get instant carb estimates to help manage your child's diabetes",
    "start.getStarted": "Get Started",
    "start.selectLanguage": "Select Language",
    "start.disclaimerTitle": "Important Disclaimer",
    "start.disclaimerText": "This app uses AI to estimate the carbohydrate content of food from images. Results are only estimates and may be inaccurate depending on how photos are taken.\n\nAlways use this tool with care â€” you should understand the basics of carbohydrate counting and insulin calculation before use.\n\nThe app and its creators do not take responsibility for any medical or dietary decisions based on these results. Always confirm with a healthcare professional when in doubt.",
    "start.accept": "I Understand and Accept",
    "start.decline": "Decline",
    
    // Main App
    "app.title": "CarbSmart",
    "app.subtitle": "Take a photo, know your carbs!",
    "app.analyzing": "Analyzing...",
    "app.analyzingDesc": "AI is examining your food photo",
    "app.analysisComplete": "Analysis Complete!",
    "app.analysisCompleteDesc": "Found {carbs}g carbs, suggesting {insulin} units of insulin",
    "app.savedToHistory": "Saved to History",
    "app.savedToHistoryDesc": "Your meal has been saved successfully",
    "app.error": "Error",
    "app.errorDesc": "Failed to analyze image. Please try again.",
    
    // Tabs
    "tabs.capture": "Capture",
    "tabs.meals": "Meals",
    "tabs.history": "History",
    "tabs.info": "Info",
    "tabs.settings": "Settings",
    
    // Auth
    "auth.welcome": "Welcome to CarbSmart",
    "auth.welcomeDesc": "Sign in or create an account to continue",
    "auth.signIn": "Sign In",
    "auth.signUp": "Sign Up",
    "auth.email": "Email",
    "auth.password": "Password (min 6 characters)",
    "auth.loading": "Loading...",
    "auth.signupSuccess": "Account created",
    "auth.signupSuccessDesc": "You can now sign in with your credentials",
    "auth.signOut": "Sign Out",
    
    // Camera
    "camera.title": "Capture Food",
    "camera.takePhoto": "Take Photo",
    "camera.retake": "Retake",
    "camera.analyze": "Analyze",
    "camera.error": "Camera Error",
    "camera.errorDesc": "Could not access camera. Please check permissions.",
    
    // Results
    "results.title": "Results",
    "results.estimatedCarbs": "Estimated Carbs",
    "results.totalCarbs": "Total Carbs",
    "results.recommendedInsulin": "Recommended Insulin Dose",
    "results.insulinNeeded": "Insulin Needed",
    "results.grams": "grams",
    "results.units": "units",
    "results.carbs": "Carbs",
    "results.basedOnRatio": "Based on 1:{ratio} ratio",
    "results.fromPhotos": "from {count} photos",
    "results.addMore": "More Pictures",
    "results.done": "Done - Calculate & Save",
    "results.abort": "Abort",
    "results.viewHistory": "View History",
    "results.newPhoto": "New Photo",
    
    // History
    "history.title": "Recent Calculations",
    "history.noHistory": "No history yet. Start by taking a photo!",
    "history.meals": "meal",
    "history.mealsPlural": "meals",
    "history.carbs": "carbs",
    "history.insulin": "insulin",
    "history.insulinNeeded": "insulin needed",
    "history.today": "Today",
    
    // Settings
    "settings.title": "Your Settings",
    "settings.setupPin": "Set Up Parental Control",
    "settings.setupPinDesc": "Create a 4-digit PIN to protect your settings",
    "settings.enterPin": "Enter PIN",
    "settings.confirmPin": "Confirm PIN",
    "settings.setPin": "Set PIN",
    "settings.unlockSettings": "Enter PIN to Access Settings",
    "settings.parentalControl": "Parental control is enabled",
    "settings.unlock": "Unlock Settings",
    "settings.settingsUnlocked": "Settings Unlocked",
    "settings.lockSettings": "Lock Settings",
    "settings.insulinRatio": "Insulin-to-Carb Ratio (I:C)",
    "settings.insulinRatioDesc": "1 unit of insulin covers {ratio} grams of carbs",
    "settings.comments": "Comments / Notes",
    "settings.commentsPlaceholder": "Add any notes or comments about your diabetes management...",
    "settings.commentsDesc": "Use this space for reminders, doctor notes, or other important information",
    "settings.invalidPin": "Invalid PIN",
    "settings.invalidPinDesc": "PIN must be exactly 4 digits",
    "settings.pinMismatch": "PINs don't match",
    "settings.pinMismatchDesc": "Please make sure both PINs match",
    "settings.pinSuccess": "PIN Set Successfully",
    "settings.pinSuccessDesc": "Your parental control PIN has been created",
    "settings.accessGranted": "Access Granted",
    "settings.accessGrantedDesc": "Welcome to Settings",
    "settings.incorrectPin": "Incorrect PIN",
    "settings.incorrectPinDesc": "Please try again",
    "settings.rereadDisclaimer": "Re-read Disclaimer",
    
    // Meal Examples
    "meals.title": "Kid-Friendly Meal Examples",
    "meals.subtitle": "Common meals with estimated carb counts",
    "meals.breakfast": "Breakfast",
    "meals.lunch": "Lunch",
    "meals.dinner": "Dinner",
    "meals.supper": "Supper",
    "meals.disclaimer": "ðŸ’¡ These are estimates. Always verify with nutrition labels when possible.",
    "meals.insulinEstimate": "~{insulin}u insulin",
    
    // Meal names
    "meal.pancakes": "Pancakes with syrup",
    "meal.pancakesDesc": "2 medium pancakes with 2 tbsp syrup",
    "meal.cereal": "Cereal with milk",
    "meal.cerealDesc": "1 cup cereal with 1/2 cup milk",
    "meal.toast": "Toast with jam",
    "meal.toastDesc": "2 slices toast with 1 tbsp jam",
    "meal.oatmeal": "Oatmeal with banana",
    "meal.oatmealDesc": "1 cup oatmeal with 1 small banana",
    "meal.waffles": "Waffles with fruit",
    "meal.wafflesDesc": "2 waffles with 1/2 cup berries",
    "meal.bagel": "Bagel with cream cheese",
    "meal.bagelDesc": "1 small bagel with 2 tbsp cream cheese",
    "meal.pbSandwich": "Peanut butter sandwich",
    "meal.pbSandwichDesc": "2 slices bread with 2 tbsp PB",
    "meal.macCheese": "Mac and cheese",
    "meal.macCheeseDesc": "1 cup prepared mac and cheese",
    "meal.nuggets": "Chicken nuggets meal",
    "meal.nuggetsDesc": "6 nuggets with small fries",
    "meal.grilledCheese": "Grilled cheese",
    "meal.grilledCheeseDesc": "2 slices bread with cheese",
    "meal.pizza": "Pizza slice",
    "meal.pizzaDesc": "1 slice cheese pizza",
    "meal.turkeyWrap": "Turkey wrap",
    "meal.turkeyWrapDesc": "1 tortilla with turkey and veggies",
    "meal.roastChicken": "Roast chicken with veggies",
    "meal.roastChickenDesc": "Baked chicken with roasted vegetables and small potato",
    "meal.meatloaf": "Meatloaf with sides",
    "meal.meatloafDesc": "Meatloaf slice with green beans and mashed potatoes",
    "meal.stirFry": "Beef stir fry",
    "meal.stirFryDesc": "Beef stir fry with vegetables over rice",
    "meal.salmon": "Baked salmon dinner",
    "meal.salmonDesc": "Salmon fillet with broccoli and rice",
    "meal.chickenParm": "Chicken parmesan",
    "meal.chickenParmDesc": "Breaded chicken with melted cheese over spaghetti",
    "meal.porkChop": "Pork chop dinner",
    "meal.porkChopDesc": "Grilled pork chop with applesauce and corn",
    "meal.spaghetti": "Spaghetti with meatballs",
    "meal.spaghettiDesc": "1 cup pasta with 3 meatballs",
    "meal.chickenRice": "Chicken with rice",
    "meal.chickenRiceDesc": "4 oz chicken with 3/4 cup rice",
    "meal.tacos": "Tacos",
    "meal.tacosDesc": "2 soft tacos with meat and toppings",
    "meal.fishSticks": "Fish sticks meal",
    "meal.fishSticksDesc": "5 fish sticks with mashed potatoes",
    "meal.hamburger": "Hamburger with bun",
    "meal.hamburgerDesc": "1 burger with bun and small side",
    "meal.quesadilla": "Chicken quesadilla",
    "meal.quesadillaDesc": "1 quesadilla with cheese and chicken",
  },
  sv: {
    // StartPage
    "start.welcome": "VÃ¤lkommen till CarbSmart!",
    "start.description": "Ta bilder pÃ¥ mÃ¥ltider och fÃ¥ omedelbar uppskattning av kolhydrater fÃ¶r att hjÃ¤lpa till att hantera ditt barns diabetes",
    "start.getStarted": "Kom igÃ¥ng",
    "start.selectLanguage": "VÃ¤lj sprÃ¥k",
    "start.disclaimerTitle": "Viktig ansvarsfriskrivning",
    "start.disclaimerText": "Denna app anvÃ¤nder AI fÃ¶r att uppskatta kolhydratinnehÃ¥llet i mat frÃ¥n bilder. Resultaten Ã¤r endast uppskattningar och kan vara felaktiga beroende pÃ¥ hur fotona tas.\n\nAnvÃ¤nd alltid detta verktyg med fÃ¶rsiktighet â€” du bÃ¶r fÃ¶rstÃ¥ grunderna fÃ¶r kolhydratrÃ¤kning och insulinberÃ¤kning innan anvÃ¤ndning.\n\nAppen och dess skapare tar inget ansvar fÃ¶r medicinska eller kostmÃ¤ssiga beslut baserade pÃ¥ dessa resultat. BekrÃ¤fta alltid med en vÃ¥rdpersonal vid tveksamhet.",
    "start.accept": "Jag fÃ¶rstÃ¥r och accepterar",
    "start.decline": "AvbÃ¶j",
    
    // Main App
    "app.title": "CarbSmart",
    "app.subtitle": "Ta ett foto, kÃ¤nn dina kolhydrater!",
    "app.analyzing": "Analyserar...",
    "app.analyzingDesc": "AI undersÃ¶ker din matbild",
    "app.analysisComplete": "Analys klar!",
    "app.analysisCompleteDesc": "Hittade {carbs}g kolhydrater, fÃ¶reslÃ¥r {insulin} enheter insulin",
    "app.savedToHistory": "Sparat till historik",
    "app.savedToHistoryDesc": "Din mÃ¥ltid har sparats framgÃ¥ngsrikt",
    "app.error": "Fel",
    "app.errorDesc": "Misslyckades med att analysera bilden. FÃ¶rsÃ¶k igen.",
    
    // Tabs
    "tabs.capture": "FÃ¥nga",
    "tabs.meals": "MÃ¥ltider",
    "tabs.history": "Historik",
    "tabs.info": "Info",
    "tabs.settings": "InstÃ¤llningar",
    
    // Auth
    "auth.welcome": "VÃ¤lkommen till CarbSmart",
    "auth.welcomeDesc": "Logga in eller skapa ett konto fÃ¶r att fortsÃ¤tta",
    "auth.signIn": "Logga in",
    "auth.signUp": "Registrera",
    "auth.email": "E-post",
    "auth.password": "LÃ¶senord (minst 6 tecken)",
    "auth.loading": "Laddar...",
    "auth.signupSuccess": "Konto skapat",
    "auth.signupSuccessDesc": "Du kan nu logga in med dina uppgifter",
    "auth.signOut": "Logga ut",
    
    // Camera
    "camera.title": "FÃ¥nga mat",
    "camera.takePhoto": "Ta foto",
    "camera.retake": "Ta om",
    "camera.analyze": "Analysera",
    "camera.error": "Kamerafel",
    "camera.errorDesc": "Kunde inte komma Ã¥t kameran. Kontrollera behÃ¶righeter.",
    
    // Results
    "results.title": "Resultat",
    "results.estimatedCarbs": "Uppskattade kolhydrater",
    "results.totalCarbs": "Totalt kolhydrater",
    "results.recommendedInsulin": "Rekommenderad insulindos",
    "results.insulinNeeded": "Insulin som behÃ¶vs",
    "results.grams": "gram",
    "results.units": "enheter",
    "results.carbs": "Kolhydrater",
    "results.basedOnRatio": "Baserat pÃ¥ 1:{ratio} fÃ¶rhÃ¥llande",
    "results.fromPhotos": "frÃ¥n {count} foton",
    "results.addMore": "Fler bilder",
    "results.done": "Klar - BerÃ¤kna & Spara",
    "results.abort": "Avbryt",
    "results.viewHistory": "Visa historik",
    "results.newPhoto": "Nytt foto",
    
    // History
    "history.title": "Senaste berÃ¤kningar",
    "history.noHistory": "Ingen historik Ã¤nnu. BÃ¶rja med att ta ett foto!",
    "history.meals": "mÃ¥ltid",
    "history.mealsPlural": "mÃ¥ltider",
    "history.carbs": "kolhydrater",
    "history.insulin": "insulin",
    "history.insulinNeeded": "insulin behÃ¶vs",
    "history.today": "Idag",
    
    // Settings
    "settings.title": "Dina instÃ¤llningar",
    "settings.setupPin": "StÃ¤ll in fÃ¶rÃ¤ldrakontroll",
    "settings.setupPinDesc": "Skapa en 4-siffrig PIN-kod fÃ¶r att skydda dina instÃ¤llningar",
    "settings.enterPin": "Ange PIN",
    "settings.confirmPin": "BekrÃ¤fta PIN",
    "settings.setPin": "StÃ¤ll in PIN",
    "settings.unlockSettings": "Ange PIN fÃ¶r att komma Ã¥t instÃ¤llningar",
    "settings.parentalControl": "FÃ¶rÃ¤ldrakontroll Ã¤r aktiverad",
    "settings.unlock": "LÃ¥s upp instÃ¤llningar",
    "settings.settingsUnlocked": "InstÃ¤llningar upplÃ¥sta",
    "settings.lockSettings": "LÃ¥s instÃ¤llningar",
    "settings.insulinRatio": "Insulin-till-kolhydrat-fÃ¶rhÃ¥llande (I:C)",
    "settings.insulinRatioDesc": "1 enhet insulin tÃ¤cker {ratio} gram kolhydrater",
    "settings.comments": "Kommentarer / Anteckningar",
    "settings.commentsPlaceholder": "LÃ¤gg till anteckningar eller kommentarer om din diabeteshantering...",
    "settings.commentsDesc": "AnvÃ¤nd detta utrymme fÃ¶r pÃ¥minnelser, lÃ¤karanteckningar eller annan viktig information",
    "settings.invalidPin": "Ogiltig PIN",
    "settings.invalidPinDesc": "PIN mÃ¥ste vara exakt 4 siffror",
    "settings.pinMismatch": "PIN-koderna matchar inte",
    "settings.pinMismatchDesc": "Se till att bÃ¥da PIN-koderna matchar",
    "settings.pinSuccess": "PIN instÃ¤lld",
    "settings.pinSuccessDesc": "Din fÃ¶rÃ¤ldrakontroll PIN har skapats",
    "settings.accessGranted": "Ã…tkomst beviljad",
    "settings.accessGrantedDesc": "VÃ¤lkommen till instÃ¤llningar",
    "settings.incorrectPin": "Felaktig PIN",
    "settings.incorrectPinDesc": "FÃ¶rsÃ¶k igen",
    "settings.rereadDisclaimer": "LÃ¤s ansvarsfriskrivning igen",
    
    // Meal Examples
    "meals.title": "BarnvÃ¤nliga mÃ¥ltidsexempel",
    "meals.subtitle": "Vanliga mÃ¥ltider med uppskattade kolhydrater",
    "meals.breakfast": "Frukost",
    "meals.lunch": "Lunch",
    "meals.dinner": "Middag",
    "meals.supper": "KvÃ¤llsmat",
    "meals.disclaimer": "ðŸ’¡ Dessa Ã¤r uppskattningar. Verifiera alltid med nÃ¤ringsdeklarationer nÃ¤r det Ã¤r mÃ¶jligt.",
    "meals.insulinEstimate": "~{insulin}e insulin",
    
    // Meal names
    "meal.pancakes": "Pannkakor med sirap",
    "meal.pancakesDesc": "2 medelstora pannkakor med 2 msk sirap",
    "meal.cereal": "Flingor med mjÃ¶lk",
    "meal.cerealDesc": "1 kopp flingor med 1/2 kopp mjÃ¶lk",
    "meal.toast": "Rostat brÃ¶d med sylt",
    "meal.toastDesc": "2 skivor rostat brÃ¶d med 1 msk sylt",
    "meal.oatmeal": "HavregrynsgrÃ¶t med banan",
    "meal.oatmealDesc": "1 kopp havregrynsgrÃ¶t med 1 liten banan",
    "meal.waffles": "VÃ¥fflor med frukt",
    "meal.wafflesDesc": "2 vÃ¥fflor med 1/2 kopp bÃ¤r",
    "meal.bagel": "Bagel med fÃ¤rskost",
    "meal.bagelDesc": "1 liten bagel med 2 msk fÃ¤rskost",
    "meal.pbSandwich": "JordnÃ¶tssmÃ¶rsmacka",
    "meal.pbSandwichDesc": "2 skivor brÃ¶d med 2 msk jordnÃ¶tssmÃ¶r",
    "meal.macCheese": "Makaroner och ost",
    "meal.macCheeseDesc": "1 kopp tillagade makaroner och ost",
    "meal.nuggets": "Kycklingnuggets mÃ¥ltid",
    "meal.nuggetsDesc": "6 nuggets med smÃ¥ pommes",
    "meal.grilledCheese": "Grillad ostsmÃ¶rgÃ¥s",
    "meal.grilledCheeseDesc": "2 skivor brÃ¶d med ost",
    "meal.pizza": "Pizzabit",
    "meal.pizzaDesc": "1 bit ostpizza",
    "meal.turkeyWrap": "Kalkonwrap",
    "meal.turkeyWrapDesc": "1 tortilla med kalkon och grÃ¶nsaker",
    "meal.roastChicken": "Rostad kyckling med grÃ¶nsaker",
    "meal.roastChickenDesc": "Bakad kyckling med rostade grÃ¶nsaker och liten potatis",
    "meal.meatloaf": "KÃ¶ttfÃ¤rslimpa med tillbehÃ¶r",
    "meal.meatloafDesc": "KÃ¶ttfÃ¤rslimpskiva med grÃ¶na bÃ¶nor och potatismos",
    "meal.stirFry": "Biff wok",
    "meal.stirFryDesc": "Biff wok med grÃ¶nsaker Ã¶ver ris",
    "meal.salmon": "Bakad lax middag",
    "meal.salmonDesc": "LaxfilÃ© med broccoli och ris",
    "meal.chickenParm": "Kycklingparmigiana",
    "meal.chickenParmDesc": "Panerad kyckling med smÃ¤lt ost Ã¶ver spaghetti",
    "meal.porkChop": "FlÃ¤skkotlett middag",
    "meal.porkChopDesc": "Grillad flÃ¤skkotlett med Ã¤ppelmos och majs",
    "meal.spaghetti": "Spaghetti med kÃ¶ttbullar",
    "meal.spaghettiDesc": "1 kopp pasta med 3 kÃ¶ttbullar",
    "meal.chickenRice": "Kyckling med ris",
    "meal.chickenRiceDesc": "115g kyckling med 3/4 kopp ris",
    "meal.tacos": "Tacos",
    "meal.tacosDesc": "2 mjuka tacos med kÃ¶tt och pÃ¥lÃ¤gg",
    "meal.fishSticks": "Fiskpinnar mÃ¥ltid",
    "meal.fishSticksDesc": "5 fiskpinnar med potatismos",
    "meal.hamburger": "Hamburgare med brÃ¶d",
    "meal.hamburgerDesc": "1 burgare med brÃ¶d och liten tillbehÃ¶r",
    "meal.quesadilla": "Kycklingquesadilla",
    "meal.quesadillaDesc": "1 quesadilla med ost och kyckling",
  },
  fr: {
    // StartPage
    "start.welcome": "Bienvenue sur CarbSmart!",
    "start.description": "Prenez des photos de repas et obtenez des estimations instantanÃ©es de glucides pour aider Ã  gÃ©rer le diabÃ¨te de votre enfant",
    "start.getStarted": "Commencer",
    "start.selectLanguage": "SÃ©lectionner la langue",
    "start.disclaimerTitle": "Avertissement important",
    "start.disclaimerText": "Cette application utilise l'IA pour estimer la teneur en glucides des aliments Ã  partir d'images. Les rÃ©sultats ne sont que des estimations et peuvent Ãªtre inexacts selon la faÃ§on dont les photos sont prises.\n\nUtilisez toujours cet outil avec prudence - vous devez comprendre les bases du comptage des glucides et du calcul de l'insuline avant utilisation.\n\nL'application et ses crÃ©ateurs n'assument aucune responsabilitÃ© pour les dÃ©cisions mÃ©dicales ou diÃ©tÃ©tiques basÃ©es sur ces rÃ©sultats. Confirmez toujours avec un professionnel de la santÃ© en cas de doute.",
    "start.accept": "Je comprends et j'accepte",
    "start.decline": "Refuser",
    
    // Main App
    "app.title": "CarbSmart",
    "app.subtitle": "Prenez une photo, connaissez vos glucides!",
    "app.analyzing": "Analyse en cours...",
    "app.analyzingDesc": "L'IA examine votre photo de nourriture",
    "app.analysisComplete": "Analyse terminÃ©e!",
    "app.analysisCompleteDesc": "TrouvÃ© {carbs}g de glucides, suggÃ©rant {insulin} unitÃ©s d'insuline",
    "app.savedToHistory": "EnregistrÃ© dans l'historique",
    "app.savedToHistoryDesc": "Votre repas a Ã©tÃ© enregistrÃ© avec succÃ¨s",
    "app.error": "Erreur",
    "app.errorDesc": "Ã‰chec de l'analyse de l'image. Veuillez rÃ©essayer.",
    
    // Tabs
    "tabs.capture": "Capturer",
    "tabs.meals": "Repas",
    "tabs.history": "Historique",
    "tabs.info": "Info",
    "tabs.settings": "ParamÃ¨tres",
    
    // Auth
    "auth.welcome": "Bienvenue sur CarbSmart",
    "auth.welcomeDesc": "Connectez-vous ou crÃ©ez un compte pour continuer",
    "auth.signIn": "Se connecter",
    "auth.signUp": "S'inscrire",
    "auth.email": "Email",
    "auth.password": "Mot de passe (min 6 caractÃ¨res)",
    "auth.loading": "Chargement...",
    "auth.signupSuccess": "Compte crÃ©Ã©",
    "auth.signupSuccessDesc": "Vous pouvez maintenant vous connecter avec vos identifiants",
    "auth.signOut": "Se dÃ©connecter",
    
    // Camera
    "camera.title": "Capturer la nourriture",
    "camera.takePhoto": "Prendre une photo",
    "camera.retake": "Reprendre",
    "camera.analyze": "Analyser",
    "camera.error": "Erreur de camÃ©ra",
    "camera.errorDesc": "Impossible d'accÃ©der Ã  la camÃ©ra. Veuillez vÃ©rifier les permissions.",
    
    // Results
    "results.title": "RÃ©sultats",
    "results.estimatedCarbs": "Glucides estimÃ©s",
    "results.totalCarbs": "Total de glucides",
    "results.recommendedInsulin": "Dose d'insuline recommandÃ©e",
    "results.insulinNeeded": "Insuline nÃ©cessaire",
    "results.grams": "grammes",
    "results.units": "unitÃ©s",
    "results.carbs": "Glucides",
    "results.basedOnRatio": "BasÃ© sur un ratio 1:{ratio}",
    "results.fromPhotos": "de {count} photos",
    "results.addMore": "Plus de photos",
    "results.done": "TerminÃ© - Calculer et enregistrer",
    "results.abort": "Annuler",
    "results.viewHistory": "Voir l'historique",
    "results.newPhoto": "Nouvelle photo",
    
    // History
    "history.title": "Calculs rÃ©cents",
    "history.noHistory": "Pas encore d'historique. Commencez par prendre une photo!",
    "history.meals": "repas",
    "history.mealsPlural": "repas",
    "history.carbs": "glucides",
    "history.insulin": "insuline",
    "history.insulinNeeded": "insuline nÃ©cessaire",
    "history.today": "Aujourd'hui",
    
    // Settings
    "settings.title": "Vos paramÃ¨tres",
    "settings.setupPin": "Configurer le contrÃ´le parental",
    "settings.setupPinDesc": "CrÃ©ez un code PIN Ã  4 chiffres pour protÃ©ger vos paramÃ¨tres",
    "settings.enterPin": "Entrer le PIN",
    "settings.confirmPin": "Confirmer le PIN",
    "settings.setPin": "DÃ©finir le PIN",
    "settings.unlockSettings": "Entrez le PIN pour accÃ©der aux paramÃ¨tres",
    "settings.parentalControl": "Le contrÃ´le parental est activÃ©",
    "settings.unlock": "DÃ©verrouiller les paramÃ¨tres",
    "settings.settingsUnlocked": "ParamÃ¨tres dÃ©verrouillÃ©s",
    "settings.lockSettings": "Verrouiller les paramÃ¨tres",
    "settings.insulinRatio": "Ratio insuline/glucides (I:C)",
    "settings.insulinRatioDesc": "1 unitÃ© d'insuline couvre {ratio} grammes de glucides",
    "settings.comments": "Commentaires / Notes",
    "settings.commentsPlaceholder": "Ajoutez des notes ou commentaires sur la gestion de votre diabÃ¨te...",
    "settings.commentsDesc": "Utilisez cet espace pour les rappels, notes du mÃ©decin ou autres informations importantes",
    "settings.invalidPin": "PIN invalide",
    "settings.invalidPinDesc": "Le PIN doit comporter exactement 4 chiffres",
    "settings.pinMismatch": "Les PINs ne correspondent pas",
    "settings.pinMismatchDesc": "Veuillez vous assurer que les deux PINs correspondent",
    "settings.pinSuccess": "PIN dÃ©fini avec succÃ¨s",
    "settings.pinSuccessDesc": "Votre PIN de contrÃ´le parental a Ã©tÃ© crÃ©Ã©",
    "settings.accessGranted": "AccÃ¨s autorisÃ©",
    "settings.accessGrantedDesc": "Bienvenue dans les paramÃ¨tres",
    "settings.incorrectPin": "PIN incorrect",
    "settings.incorrectPinDesc": "Veuillez rÃ©essayer",
    "settings.rereadDisclaimer": "Relire l'avertissement",
    
    // Meal Examples
    "meals.title": "Exemples de repas pour enfants",
    "meals.subtitle": "Repas courants avec estimations de glucides",
    "meals.breakfast": "Petit-dÃ©jeuner",
    "meals.lunch": "DÃ©jeuner",
    "meals.dinner": "DÃ®ner",
    "meals.supper": "Souper",
    "meals.disclaimer": "ðŸ’¡ Ce sont des estimations. VÃ©rifiez toujours avec les Ã©tiquettes nutritionnelles quand c'est possible.",
    "meals.insulinEstimate": "~{insulin}u d'insuline",
    
    // Meal names
    "meal.pancakes": "CrÃªpes au sirop",
    "meal.pancakesDesc": "2 crÃªpes moyennes avec 2 c. Ã  soupe de sirop",
    "meal.cereal": "CÃ©rÃ©ales au lait",
    "meal.cerealDesc": "1 tasse de cÃ©rÃ©ales avec 1/2 tasse de lait",
    "meal.toast": "Pain grillÃ© Ã  la confiture",
    "meal.toastDesc": "2 tranches de pain grillÃ© avec 1 c. Ã  soupe de confiture",
    "meal.oatmeal": "Gruau Ã  la banane",
    "meal.oatmealDesc": "1 tasse de gruau avec 1 petite banane",
    "meal.waffles": "Gaufres aux fruits",
    "meal.wafflesDesc": "2 gaufres avec 1/2 tasse de baies",
    "meal.bagel": "Bagel au fromage Ã  la crÃ¨me",
    "meal.bagelDesc": "1 petit bagel avec 2 c. Ã  soupe de fromage Ã  la crÃ¨me",
    "meal.pbSandwich": "Sandwich au beurre d'arachide",
    "meal.pbSandwichDesc": "2 tranches de pain avec 2 c. Ã  soupe de beurre d'arachide",
    "meal.macCheese": "Macaroni au fromage",
    "meal.macCheeseDesc": "1 tasse de macaroni au fromage prÃ©parÃ©",
    "meal.nuggets": "Repas de croquettes de poulet",
    "meal.nuggetsDesc": "6 croquettes avec petites frites",
    "meal.grilledCheese": "Sandwich au fromage grillÃ©",
    "meal.grilledCheeseDesc": "2 tranches de pain avec fromage",
    "meal.pizza": "Part de pizza",
    "meal.pizzaDesc": "1 part de pizza au fromage",
    "meal.turkeyWrap": "Wrap Ã  la dinde",
    "meal.turkeyWrapDesc": "1 tortilla avec dinde et lÃ©gumes",
    "meal.roastChicken": "Poulet rÃ´ti aux lÃ©gumes",
    "meal.roastChickenDesc": "Poulet cuit au four avec lÃ©gumes rÃ´tis et petite pomme de terre",
    "meal.meatloaf": "Pain de viande avec accompagnements",
    "meal.meatloafDesc": "Tranche de pain de viande avec haricots verts et purÃ©e",
    "meal.stirFry": "SautÃ© de bÅ“uf",
    "meal.stirFryDesc": "SautÃ© de bÅ“uf aux lÃ©gumes sur riz",
    "meal.salmon": "DÃ®ner de saumon cuit",
    "meal.salmonDesc": "Filet de saumon avec brocoli et riz",
    "meal.chickenParm": "Poulet parmigiana",
    "meal.chickenParmDesc": "Poulet panÃ© avec fromage fondu sur spaghetti",
    "meal.porkChop": "DÃ®ner de cÃ´telette de porc",
    "meal.porkChopDesc": "CÃ´telette de porc grillÃ©e avec compote de pommes et maÃ¯s",
    "meal.spaghetti": "Spaghetti aux boulettes",
    "meal.spaghettiDesc": "1 tasse de pÃ¢tes avec 3 boulettes",
    "meal.chickenRice": "Poulet au riz",
    "meal.chickenRiceDesc": "115g de poulet avec 3/4 tasse de riz",
    "meal.tacos": "Tacos",
    "meal.tacosDesc": "2 tacos mous avec viande et garnitures",
    "meal.fishSticks": "Repas de bÃ¢tonnets de poisson",
    "meal.fishSticksDesc": "5 bÃ¢tonnets de poisson avec purÃ©e",
    "meal.hamburger": "Hamburger avec pain",
    "meal.hamburgerDesc": "1 burger avec pain et petit accompagnement",
    "meal.quesadilla": "Quesadilla au poulet",
    "meal.quesadillaDesc": "1 quesadilla avec fromage et poulet",
  },
  es: {
    // StartPage
    "start.welcome": "Â¡Bienvenido a CarbSmart!",
    "start.description": "Toma fotos de comidas y obtÃ©n estimaciones instantÃ¡neas de carbohidratos para ayudar a manejar la diabetes de tu hijo",
    "start.getStarted": "Comenzar",
    "start.selectLanguage": "Seleccionar idioma",
    "start.disclaimerTitle": "Aviso importante",
    "start.disclaimerText": "Esta aplicaciÃ³n utiliza IA para estimar el contenido de carbohidratos de los alimentos a partir de imÃ¡genes. Los resultados son solo estimaciones y pueden ser inexactos segÃºn cÃ³mo se tomen las fotos.\n\nUsa siempre esta herramienta con cuidado: debes comprender los conceptos bÃ¡sicos del conteo de carbohidratos y el cÃ¡lculo de insulina antes de usarla.\n\nLa aplicaciÃ³n y sus creadores no se responsabilizan de ninguna decisiÃ³n mÃ©dica o dietÃ©tica basada en estos resultados. Confirma siempre con un profesional de la salud en caso de duda.",
    "start.accept": "Entiendo y acepto",
    "start.decline": "Rechazar",
    
    // Main App
    "app.title": "CarbSmart",
    "app.subtitle": "Â¡Toma una foto, conoce tus carbohidratos!",
    "app.analyzing": "Analizando...",
    "app.analyzingDesc": "La IA estÃ¡ examinando tu foto de comida",
    "app.analysisComplete": "Â¡AnÃ¡lisis completo!",
    "app.analysisCompleteDesc": "Se encontraron {carbs}g de carbohidratos, sugiriendo {insulin} unidades de insulina",
    "app.savedToHistory": "Guardado en historial",
    "app.savedToHistoryDesc": "Tu comida ha sido guardada exitosamente",
    "app.error": "Error",
    "app.errorDesc": "Error al analizar la imagen. Por favor, intÃ©ntalo de nuevo.",
    
    // Tabs
    "tabs.capture": "Capturar",
    "tabs.meals": "Comidas",
    "tabs.history": "Historial",
    "tabs.info": "Info",
    "tabs.settings": "Ajustes",
    
    // Auth
    "auth.welcome": "Bienvenido a CarbSmart",
    "auth.welcomeDesc": "Inicia sesiÃ³n o crea una cuenta para continuar",
    "auth.signIn": "Iniciar sesiÃ³n",
    "auth.signUp": "Registrarse",
    "auth.email": "Correo electrÃ³nico",
    "auth.password": "ContraseÃ±a (mÃ­n. 6 caracteres)",
    "auth.loading": "Cargando...",
    "auth.signupSuccess": "Cuenta creada",
    "auth.signupSuccessDesc": "Ahora puedes iniciar sesiÃ³n con tus credenciales",
    "auth.signOut": "Cerrar sesiÃ³n",
    
    // Camera
    "camera.title": "Capturar comida",
    "camera.takePhoto": "Tomar foto",
    "camera.retake": "Retomar",
    "camera.analyze": "Analizar",
    "camera.error": "Error de cÃ¡mara",
    "camera.errorDesc": "No se pudo acceder a la cÃ¡mara. Por favor, verifica los permisos.",
    
    // Results
    "results.title": "Resultados",
    "results.estimatedCarbs": "Carbohidratos estimados",
    "results.totalCarbs": "Total de carbohidratos",
    "results.recommendedInsulin": "Dosis de insulina recomendada",
    "results.insulinNeeded": "Insulina necesaria",
    "results.grams": "gramos",
    "results.units": "unidades",
    "results.carbs": "Carbohidratos",
    "results.basedOnRatio": "Basado en ratio 1:{ratio}",
    "results.fromPhotos": "de {count} fotos",
    "results.addMore": "MÃ¡s fotos",
    "results.done": "Listo - Calcular y guardar",
    "results.abort": "Abortar",
    "results.viewHistory": "Ver historial",
    "results.newPhoto": "Nueva foto",
    
    // History
    "history.title": "CÃ¡lculos recientes",
    "history.noHistory": "AÃºn no hay historial. Â¡Comienza tomando una foto!",
    "history.meals": "comida",
    "history.mealsPlural": "comidas",
    "history.carbs": "carbohidratos",
    "history.insulin": "insulina",
    "history.insulinNeeded": "insulina necesaria",
    "history.today": "Hoy",
    
    // Settings
    "settings.title": "Tus ajustes",
    "settings.setupPin": "Configurar control parental",
    "settings.setupPinDesc": "Crea un PIN de 4 dÃ­gitos para proteger tus ajustes",
    "settings.enterPin": "Ingresa el PIN",
    "settings.confirmPin": "Confirma el PIN",
    "settings.setPin": "Establecer PIN",
    "settings.unlockSettings": "Ingresa el PIN para acceder a los ajustes",
    "settings.parentalControl": "El control parental estÃ¡ activado",
    "settings.unlock": "Desbloquear ajustes",
    "settings.settingsUnlocked": "Ajustes desbloqueados",
    "settings.lockSettings": "Bloquear ajustes",
    "settings.insulinRatio": "Ratio insulina/carbohidratos (I:C)",
    "settings.insulinRatioDesc": "1 unidad de insulina cubre {ratio} gramos de carbohidratos",
    "settings.comments": "Comentarios / Notas",
    "settings.commentsPlaceholder": "AÃ±ade notas o comentarios sobre el manejo de tu diabetes...",
    "settings.commentsDesc": "Usa este espacio para recordatorios, notas del mÃ©dico u otra informaciÃ³n importante",
    "settings.invalidPin": "PIN invÃ¡lido",
    "settings.invalidPinDesc": "El PIN debe tener exactamente 4 dÃ­gitos",
    "settings.pinMismatch": "Los PINs no coinciden",
    "settings.pinMismatchDesc": "Por favor, asegÃºrate de que ambos PINs coincidan",
    "settings.pinSuccess": "PIN establecido con Ã©xito",
    "settings.pinSuccessDesc": "Tu PIN de control parental ha sido creado",
    "settings.accessGranted": "Acceso concedido",
    "settings.accessGrantedDesc": "Bienvenido a ajustes",
    "settings.incorrectPin": "PIN incorrecto",
    "settings.incorrectPinDesc": "Por favor, intÃ©ntalo de nuevo",
    "settings.rereadDisclaimer": "Releer aviso",
    
    // Meal Examples
    "meals.title": "Ejemplos de comidas para niÃ±os",
    "meals.subtitle": "Comidas comunes con conteos estimados de carbohidratos",
    "meals.breakfast": "Desayuno",
    "meals.lunch": "Almuerzo",
    "meals.dinner": "Cena",
    "meals.supper": "Cena ligera",
    "meals.disclaimer": "ðŸ’¡ Estas son estimaciones. Siempre verifica con las etiquetas nutricionales cuando sea posible.",
    "meals.insulinEstimate": "~{insulin}u de insulina",
    
    // Meal names
    "meal.pancakes": "Panqueques con jarabe",
    "meal.pancakesDesc": "2 panqueques medianos con 2 cdas de jarabe",
    "meal.cereal": "Cereal con leche",
    "meal.cerealDesc": "1 taza de cereal con 1/2 taza de leche",
    "meal.toast": "Tostada con mermelada",
    "meal.toastDesc": "2 rebanadas de pan tostado con 1 cda de mermelada",
    "meal.oatmeal": "Avena con plÃ¡tano",
    "meal.oatmealDesc": "1 taza de avena con 1 plÃ¡tano pequeÃ±o",
    "meal.waffles": "Waffles con fruta",
    "meal.wafflesDesc": "2 waffles con 1/2 taza de bayas",
    "meal.bagel": "Bagel con queso crema",
    "meal.bagelDesc": "1 bagel pequeÃ±o con 2 cdas de queso crema",
    "meal.pbSandwich": "SÃ¡ndwich de mantequilla de manÃ­",
    "meal.pbSandwichDesc": "2 rebanadas de pan con 2 cdas de mantequilla de manÃ­",
    "meal.macCheese": "Macarrones con queso",
    "meal.macCheeseDesc": "1 taza de macarrones con queso preparados",
    "meal.nuggets": "Comida de nuggets de pollo",
    "meal.nuggetsDesc": "6 nuggets con papas fritas pequeÃ±as",
    "meal.grilledCheese": "SÃ¡ndwich de queso a la plancha",
    "meal.grilledCheeseDesc": "2 rebanadas de pan con queso",
    "meal.pizza": "PorciÃ³n de pizza",
    "meal.pizzaDesc": "1 porciÃ³n de pizza de queso",
    "meal.turkeyWrap": "Wrap de pavo",
    "meal.turkeyWrapDesc": "1 tortilla con pavo y vegetales",
    "meal.roastChicken": "Pollo asado con vegetales",
    "meal.roastChickenDesc": "Pollo horneado con vegetales asados y papa pequeÃ±a",
    "meal.meatloaf": "Pastel de carne con acompaÃ±amientos",
    "meal.meatloafDesc": "PorciÃ³n de pastel de carne con judÃ­as verdes y purÃ©",
    "meal.stirFry": "Salteado de carne",
    "meal.stirFryDesc": "Salteado de carne con vegetales sobre arroz",
    "meal.salmon": "Cena de salmÃ³n horneado",
    "meal.salmonDesc": "Filete de salmÃ³n con brÃ³coli y arroz",
    "meal.chickenParm": "Pollo parmesano",
    "meal.chickenParmDesc": "Pollo empanado con queso derretido sobre espagueti",
    "meal.porkChop": "Cena de chuleta de cerdo",
    "meal.porkChopDesc": "Chuleta de cerdo a la parrilla con purÃ© de manzana y maÃ­z",
    "meal.spaghetti": "Espagueti con albÃ³ndigas",
    "meal.spaghettiDesc": "1 taza de pasta con 3 albÃ³ndigas",
    "meal.chickenRice": "Pollo con arroz",
    "meal.chickenRiceDesc": "115g de pollo con 3/4 taza de arroz",
    "meal.tacos": "Tacos",
    "meal.tacosDesc": "2 tacos suaves con carne y coberturas",
    "meal.fishSticks": "Comida de palitos de pescado",
    "meal.fishSticksDesc": "5 palitos de pescado con purÃ©",
    "meal.hamburger": "Hamburguesa con pan",
    "meal.hamburgerDesc": "1 hamburguesa con pan y acompaÃ±amiento pequeÃ±o",
    "meal.quesadilla": "Quesadilla de pollo",
    "meal.quesadillaDesc": "1 quesadilla con queso y pollo",
  },
};

export const LanguageProvider = ({ children }: { children: ReactNode }) => {
  const [language, setLanguage] = useState<Language>("en");

  const t = (key: string, params?: Record<string, string | number>): string => {
    let text = translations[language][key] || key;
    
    if (params) {
      Object.entries(params).forEach(([param, value]) => {
        text = text.replace(`{${param}}`, String(value));
      });
    }
    
    return text;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error("useLanguage must be used within LanguageProvider");
  }
  return context;
};
