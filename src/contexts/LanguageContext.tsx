import { createContext, useContext, useState, ReactNode } from "react";

export type Language = "en" | "sv" | "fr" | "es";

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string, params?: Record<string, string | number>) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

const translations: Record<Language, Record<string, string>> = {
  en: {
    // StartPage
    "start.welcome": "Welcome to CarbSmart!",
    "start.description": "Take photos of meals and get instant carb estimates to help manage your child's diabetes",
    "start.getStarted": "Get Started",
    "start.selectLanguage": "Select Language",
    "start.disclaimerTitle": "Important Disclaimer",
    "start.disclaimerText": "This app uses AI to estimate the carbohydrate content of food from images. Results are only estimates and may be inaccurate depending on how photos are taken.\n\nAlways use this tool with care ‚Äî you should understand the basics of carbohydrate counting and insulin calculation before use.\n\nThe app and its creators do not take responsibility for any medical or dietary decisions based on these results. Always confirm with a healthcare professional when in doubt.",
    "start.accept": "I Understand and Accept",
    "start.decline": "Decline",
    
    // Main App
    "app.title": "CarbSmart",
    "app.subtitle": "Take a photo, know your carbs!",
    "app.analyzing": "Analyzing...",
    "app.analyzingDesc": "AI is examining your food photo",
    "app.analysisComplete": "Analysis Complete!",
    "app.analysisCompleteDesc": "Found {carbs}g carbs, suggesting {insulin} units of insulin",
    "app.savedToHistory": "Saved to History",
    "app.savedToHistoryDesc": "Your meal has been saved successfully",
    "app.error": "Error",
    "app.errorDesc": "Failed to analyze image. Please try again.",
    
    // Tabs
    "tabs.capture": "Capture",
    "tabs.meals": "Meals",
    "tabs.history": "History",
    "tabs.info": "Info",
    "tabs.settings": "Settings",
    
    // Auth
    "auth.welcome": "Welcome to CarbSmart",
    "auth.welcomeDesc": "Sign in or create an account to continue",
    "auth.signIn": "Sign In",
    "auth.signUp": "Sign Up",
    "auth.email": "Email",
    "auth.password": "Password (min 6 characters)",
    "auth.loading": "Loading...",
    "auth.signupSuccess": "Account created",
    "auth.signupSuccessDesc": "You can now sign in with your credentials",
    "auth.signOut": "Sign Out",
    
    // Camera
    "camera.title": "Capture Food",
    "camera.takePhoto": "Take Photo",
    "camera.retake": "Retake",
    "camera.analyze": "Analyze",
    "camera.error": "Camera Error",
    "camera.errorDesc": "Could not access camera. Please check permissions.",
    
    // Results
    "results.title": "Results",
    "results.estimatedCarbs": "Estimated Carbs",
    "results.totalCarbs": "Total Carbs",
    "results.recommendedInsulin": "Recommended Insulin Dose",
    "results.insulinNeeded": "Insulin Needed",
    "results.grams": "grams",
    "results.units": "units",
    "results.carbs": "Carbs",
    "results.basedOnRatio": "Based on 1:{ratio} ratio",
    "results.fromPhotos": "from {count} photos",
    "results.addMore": "More Pictures",
    "results.done": "Done - Calculate & Save",
    "results.abort": "Abort",
    "results.viewHistory": "View History",
    "results.newPhoto": "New Photo",
    
    // History
    "history.title": "Recent Calculations",
    "history.noHistory": "No history yet. Start by taking a photo!",
    "history.meals": "meal",
    "history.mealsPlural": "meals",
    "history.carbs": "carbs",
    "history.insulin": "insulin",
    "history.insulinNeeded": "insulin needed",
    "history.today": "Today",
    
    // Settings
    "settings.title": "Your Settings",
    "settings.setupPin": "Set Up Parental Control",
    "settings.setupPinDesc": "Create a 4-digit PIN to protect your settings",
    "settings.enterPin": "Enter PIN",
    "settings.confirmPin": "Confirm PIN",
    "settings.setPin": "Set PIN",
    "settings.unlockSettings": "Enter PIN to Access Settings",
    "settings.parentalControl": "Parental control is enabled",
    "settings.unlock": "Unlock Settings",
    "settings.settingsUnlocked": "Settings Unlocked",
    "settings.lockSettings": "Lock Settings",
    "settings.insulinRatio": "Insulin-to-Carb Ratio (I:C)",
    "settings.insulinRatioDesc": "1 unit of insulin covers {ratio} grams of carbs",
    "settings.comments": "Comments / Notes",
    "settings.commentsPlaceholder": "Add any notes or comments about your diabetes management...",
    "settings.commentsDesc": "Use this space for reminders, doctor notes, or other important information",
    "settings.invalidPin": "Invalid PIN",
    "settings.invalidPinDesc": "PIN must be exactly 4 digits",
    "settings.pinMismatch": "PINs don't match",
    "settings.pinMismatchDesc": "Please make sure both PINs match",
    "settings.pinSuccess": "PIN Set Successfully",
    "settings.pinSuccessDesc": "Your parental control PIN has been created",
    "settings.accessGranted": "Access Granted",
    "settings.accessGrantedDesc": "Welcome to Settings",
    "settings.incorrectPin": "Incorrect PIN",
    "settings.incorrectPinDesc": "Please try again",
    "settings.rereadDisclaimer": "Re-read Disclaimer",
    
    // Meal Examples
    "meals.title": "Kid-Friendly Meal Examples",
    "meals.subtitle": "Common meals with estimated carb counts",
    "meals.breakfast": "Breakfast",
    "meals.lunch": "Lunch",
    "meals.dinner": "Dinner",
    "meals.supper": "Supper",
    "meals.disclaimer": "üí° These are estimates. Always verify with nutrition labels when possible.",
    "meals.insulinEstimate": "~{insulin}u insulin",
    
    // Meal names
    "meal.pancakes": "Pancakes with syrup",
    "meal.pancakesDesc": "2 medium pancakes with 2 tbsp syrup",
    "meal.cereal": "Cereal with milk",
    "meal.cerealDesc": "1 cup cereal with 1/2 cup milk",
    "meal.toast": "Toast with jam",
    "meal.toastDesc": "2 slices toast with 1 tbsp jam",
    "meal.oatmeal": "Oatmeal with banana",
    "meal.oatmealDesc": "1 cup oatmeal with 1 small banana",
    "meal.waffles": "Waffles with fruit",
    "meal.wafflesDesc": "2 waffles with 1/2 cup berries",
    "meal.bagel": "Bagel with cream cheese",
    "meal.bagelDesc": "1 small bagel with 2 tbsp cream cheese",
    "meal.pbSandwich": "Peanut butter sandwich",
    "meal.pbSandwichDesc": "2 slices bread with 2 tbsp PB",
    "meal.macCheese": "Mac and cheese",
    "meal.macCheeseDesc": "1 cup prepared mac and cheese",
    "meal.nuggets": "Chicken nuggets meal",
    "meal.nuggetsDesc": "6 nuggets with small fries",
    "meal.grilledCheese": "Grilled cheese",
    "meal.grilledCheeseDesc": "2 slices bread with cheese",
    "meal.pizza": "Pizza slice",
    "meal.pizzaDesc": "1 slice cheese pizza",
    "meal.turkeyWrap": "Turkey wrap",
    "meal.turkeyWrapDesc": "1 tortilla with turkey and veggies",
    "meal.roastChicken": "Roast chicken with veggies",
    "meal.roastChickenDesc": "Baked chicken with roasted vegetables and small potato",
    "meal.meatloaf": "Meatloaf with sides",
    "meal.meatloafDesc": "Meatloaf slice with green beans and mashed potatoes",
    "meal.stirFry": "Beef stir fry",
    "meal.stirFryDesc": "Beef stir fry with vegetables over rice",
    "meal.salmon": "Baked salmon dinner",
    "meal.salmonDesc": "Salmon fillet with broccoli and rice",
    "meal.chickenParm": "Chicken parmesan",
    "meal.chickenParmDesc": "Breaded chicken with melted cheese over spaghetti",
    "meal.porkChop": "Pork chop dinner",
    "meal.porkChopDesc": "Grilled pork chop with applesauce and corn",
    "meal.spaghetti": "Spaghetti with meatballs",
    "meal.spaghettiDesc": "1 cup pasta with 3 meatballs",
    "meal.chickenRice": "Chicken with rice",
    "meal.chickenRiceDesc": "4 oz chicken with 3/4 cup rice",
    "meal.tacos": "Tacos",
    "meal.tacosDesc": "2 soft tacos with meat and toppings",
    "meal.fishSticks": "Fish sticks meal",
    "meal.fishSticksDesc": "5 fish sticks with mashed potatoes",
    "meal.hamburger": "Hamburger with bun",
    "meal.hamburgerDesc": "1 burger with bun and small side",
    "meal.quesadilla": "Chicken quesadilla",
    "meal.quesadillaDesc": "1 quesadilla with cheese and chicken",
  },
  sv: {
    // StartPage
    "start.welcome": "V√§lkommen till CarbSmart!",
    "start.description": "Ta bilder p√• m√•ltider och f√• omedelbar uppskattning av kolhydrater f√∂r att hj√§lpa till att hantera ditt barns diabetes",
    "start.getStarted": "Kom ig√•ng",
    "start.selectLanguage": "V√§lj spr√•k",
    "start.disclaimerTitle": "Viktig ansvarsfriskrivning",
    "start.disclaimerText": "Denna app anv√§nder AI f√∂r att uppskatta kolhydratinneh√•llet i mat fr√•n bilder. Resultaten √§r endast uppskattningar och kan vara felaktiga beroende p√• hur fotona tas.\n\nAnv√§nd alltid detta verktyg med f√∂rsiktighet ‚Äî du b√∂r f√∂rst√• grunderna f√∂r kolhydratr√§kning och insulinber√§kning innan anv√§ndning.\n\nAppen och dess skapare tar inget ansvar f√∂r medicinska eller kostm√§ssiga beslut baserade p√• dessa resultat. Bekr√§fta alltid med en v√•rdpersonal vid tveksamhet.",
    "start.accept": "Jag f√∂rst√•r och accepterar",
    "start.decline": "Avb√∂j",
    
    // Main App
    "app.title": "CarbSmart",
    "app.subtitle": "Ta ett foto, k√§nn dina kolhydrater!",
    "app.analyzing": "Analyserar...",
    "app.analyzingDesc": "AI unders√∂ker din matbild",
    "app.analysisComplete": "Analys klar!",
    "app.analysisCompleteDesc": "Hittade {carbs}g kolhydrater, f√∂resl√•r {insulin} enheter insulin",
    "app.savedToHistory": "Sparat till historik",
    "app.savedToHistoryDesc": "Din m√•ltid har sparats framg√•ngsrikt",
    "app.error": "Fel",
    "app.errorDesc": "Misslyckades med att analysera bilden. F√∂rs√∂k igen.",
    
    // Tabs
    "tabs.capture": "F√•nga",
    "tabs.meals": "M√•ltider",
    "tabs.history": "Historik",
    "tabs.info": "Info",
    "tabs.settings": "Inst√§llningar",
    
    // Auth
    "auth.welcome": "V√§lkommen till CarbSmart",
    "auth.welcomeDesc": "Logga in eller skapa ett konto f√∂r att forts√§tta",
    "auth.signIn": "Logga in",
    "auth.signUp": "Registrera",
    "auth.email": "E-post",
    "auth.password": "L√∂senord (minst 6 tecken)",
    "auth.loading": "Laddar...",
    "auth.signupSuccess": "Konto skapat",
    "auth.signupSuccessDesc": "Du kan nu logga in med dina uppgifter",
    "auth.signOut": "Logga ut",
    
    // Camera
    "camera.title": "F√•nga mat",
    "camera.takePhoto": "Ta foto",
    "camera.retake": "Ta om",
    "camera.analyze": "Analysera",
    "camera.error": "Kamerafel",
    "camera.errorDesc": "Kunde inte komma √•t kameran. Kontrollera beh√∂righeter.",
    
    // Results
    "results.title": "Resultat",
    "results.estimatedCarbs": "Uppskattade kolhydrater",
    "results.totalCarbs": "Totalt kolhydrater",
    "results.recommendedInsulin": "Rekommenderad insulindos",
    "results.insulinNeeded": "Insulin som beh√∂vs",
    "results.grams": "gram",
    "results.units": "enheter",
    "results.carbs": "Kolhydrater",
    "results.basedOnRatio": "Baserat p√• 1:{ratio} f√∂rh√•llande",
    "results.fromPhotos": "fr√•n {count} foton",
    "results.addMore": "Fler bilder",
    "results.done": "Klar - Ber√§kna & Spara",
    "results.abort": "Avbryt",
    "results.viewHistory": "Visa historik",
    "results.newPhoto": "Nytt foto",
    
    // History
    "history.title": "Senaste ber√§kningar",
    "history.noHistory": "Ingen historik √§nnu. B√∂rja med att ta ett foto!",
    "history.meals": "m√•ltid",
    "history.mealsPlural": "m√•ltider",
    "history.carbs": "kolhydrater",
    "history.insulin": "insulin",
    "history.insulinNeeded": "insulin beh√∂vs",
    "history.today": "Idag",
    
    // Settings
    "settings.title": "Dina inst√§llningar",
    "settings.setupPin": "St√§ll in f√∂r√§ldrakontroll",
    "settings.setupPinDesc": "Skapa en 4-siffrig PIN-kod f√∂r att skydda dina inst√§llningar",
    "settings.enterPin": "Ange PIN",
    "settings.confirmPin": "Bekr√§fta PIN",
    "settings.setPin": "St√§ll in PIN",
    "settings.unlockSettings": "Ange PIN f√∂r att komma √•t inst√§llningar",
    "settings.parentalControl": "F√∂r√§ldrakontroll √§r aktiverad",
    "settings.unlock": "L√•s upp inst√§llningar",
    "settings.settingsUnlocked": "Inst√§llningar uppl√•sta",
    "settings.lockSettings": "L√•s inst√§llningar",
    "settings.insulinRatio": "Insulin-till-kolhydrat-f√∂rh√•llande (I:C)",
    "settings.insulinRatioDesc": "1 enhet insulin t√§cker {ratio} gram kolhydrater",
    "settings.comments": "Kommentarer / Anteckningar",
    "settings.commentsPlaceholder": "L√§gg till anteckningar eller kommentarer om din diabeteshantering...",
    "settings.commentsDesc": "Anv√§nd detta utrymme f√∂r p√•minnelser, l√§karanteckningar eller annan viktig information",
    "settings.invalidPin": "Ogiltig PIN",
    "settings.invalidPinDesc": "PIN m√•ste vara exakt 4 siffror",
    "settings.pinMismatch": "PIN-koderna matchar inte",
    "settings.pinMismatchDesc": "Se till att b√•da PIN-koderna matchar",
    "settings.pinSuccess": "PIN inst√§lld",
    "settings.pinSuccessDesc": "Din f√∂r√§ldrakontroll PIN har skapats",
    "settings.accessGranted": "√Ötkomst beviljad",
    "settings.accessGrantedDesc": "V√§lkommen till inst√§llningar",
    "settings.incorrectPin": "Felaktig PIN",
    "settings.incorrectPinDesc": "F√∂rs√∂k igen",
    "settings.rereadDisclaimer": "L√§s ansvarsfriskrivning igen",
    
    // Meal Examples
    "meals.title": "Barnv√§nliga m√•ltidsexempel",
    "meals.subtitle": "Vanliga m√•ltider med uppskattade kolhydrater",
    "meals.breakfast": "Frukost",
    "meals.lunch": "Lunch",
    "meals.dinner": "Middag",
    "meals.supper": "Kv√§llsmat",
    "meals.disclaimer": "üí° Dessa √§r uppskattningar. Verifiera alltid med n√§ringsdeklarationer n√§r det √§r m√∂jligt.",
    "meals.insulinEstimate": "~{insulin}e insulin",
    
    // Meal names
    "meal.pancakes": "Pannkakor med sirap",
    "meal.pancakesDesc": "2 medelstora pannkakor med 2 msk sirap",
    "meal.cereal": "Flingor med mj√∂lk",
    "meal.cerealDesc": "1 kopp flingor med 1/2 kopp mj√∂lk",
    "meal.toast": "Rostat br√∂d med sylt",
    "meal.toastDesc": "2 skivor rostat br√∂d med 1 msk sylt",
    "meal.oatmeal": "Havregrynsgr√∂t med banan",
    "meal.oatmealDesc": "1 kopp havregrynsgr√∂t med 1 liten banan",
    "meal.waffles": "V√•fflor med frukt",
    "meal.wafflesDesc": "2 v√•fflor med 1/2 kopp b√§r",
    "meal.bagel": "Bagel med f√§rskost",
    "meal.bagelDesc": "1 liten bagel med 2 msk f√§rskost",
    "meal.pbSandwich": "Jordn√∂tssm√∂rsmacka",
    "meal.pbSandwichDesc": "2 skivor br√∂d med 2 msk jordn√∂tssm√∂r",
    "meal.macCheese": "Makaroner och ost",
    "meal.macCheeseDesc": "1 kopp tillagade makaroner och ost",
    "meal.nuggets": "Kycklingnuggets m√•ltid",
    "meal.nuggetsDesc": "6 nuggets med sm√• pommes",
    "meal.grilledCheese": "Grillad ostsm√∂rg√•s",
    "meal.grilledCheeseDesc": "2 skivor br√∂d med ost",
    "meal.pizza": "Pizzabit",
    "meal.pizzaDesc": "1 bit ostpizza",
    "meal.turkeyWrap": "Kalkonwrap",
    "meal.turkeyWrapDesc": "1 tortilla med kalkon och gr√∂nsaker",
    "meal.roastChicken": "Rostad kyckling med gr√∂nsaker",
    "meal.roastChickenDesc": "Bakad kyckling med rostade gr√∂nsaker och liten potatis",
    "meal.meatloaf": "K√∂ttf√§rslimpa med tillbeh√∂r",
    "meal.meatloafDesc": "K√∂ttf√§rslimpskiva med gr√∂na b√∂nor och potatismos",
    "meal.stirFry": "Biff wok",
    "meal.stirFryDesc": "Biff wok med gr√∂nsaker √∂ver ris",
    "meal.salmon": "Bakad lax middag",
    "meal.salmonDesc": "Laxfil√© med broccoli och ris",
    "meal.chickenParm": "Kycklingparmigiana",
    "meal.chickenParmDesc": "Panerad kyckling med sm√§lt ost √∂ver spaghetti",
    "meal.porkChop": "Fl√§skkotlett middag",
    "meal.porkChopDesc": "Grillad fl√§skkotlett med √§ppelmos och majs",
    "meal.spaghetti": "Spaghetti med k√∂ttbullar",
    "meal.spaghettiDesc": "1 kopp pasta med 3 k√∂ttbullar",
    "meal.chickenRice": "Kyckling med ris",
    "meal.chickenRiceDesc": "115g kyckling med 3/4 kopp ris",
    "meal.tacos": "Tacos",
    "meal.tacosDesc": "2 mjuka tacos med k√∂tt och p√•l√§gg",
    "meal.fishSticks": "Fiskpinnar m√•ltid",
    "meal.fishSticksDesc": "5 fiskpinnar med potatismos",
    "meal.hamburger": "Hamburgare med br√∂d",
    "meal.hamburgerDesc": "1 burgare med br√∂d och liten tillbeh√∂r",
    "meal.quesadilla": "Kycklingquesadilla",
    "meal.quesadillaDesc": "1 quesadilla med ost och kyckling",
  },
  fr: {
    // StartPage
    "start.welcome": "Bienvenue sur CarbSmart!",
    "start.description": "Prenez des photos de repas et obtenez des estimations instantan√©es de glucides pour aider √† g√©rer le diab√®te de votre enfant",
    "start.getStarted": "Commencer",
    "start.selectLanguage": "S√©lectionner la langue",
    "start.disclaimerTitle": "Avertissement important",
    "start.disclaimerText": "Cette application utilise l'IA pour estimer la teneur en glucides des aliments √† partir d'images. Les r√©sultats ne sont que des estimations et peuvent √™tre inexacts selon la fa√ßon dont les photos sont prises.\n\nUtilisez toujours cet outil avec prudence - vous devez comprendre les bases du comptage des glucides et du calcul de l'insuline avant utilisation.\n\nL'application et ses cr√©ateurs n'assument aucune responsabilit√© pour les d√©cisions m√©dicales ou di√©t√©tiques bas√©es sur ces r√©sultats. Confirmez toujours avec un professionnel de la sant√© en cas de doute.",
    "start.accept": "Je comprends et j'accepte",
    "start.decline": "Refuser",
    
    // Main App
    "app.title": "CarbSmart",
    "app.subtitle": "Prenez une photo, connaissez vos glucides!",
    "app.analyzing": "Analyse en cours...",
    "app.analyzingDesc": "L'IA examine votre photo de nourriture",
    "app.analysisComplete": "Analyse termin√©e!",
    "app.analysisCompleteDesc": "Trouv√© {carbs}g de glucides, sugg√©rant {insulin} unit√©s d'insuline",
    "app.savedToHistory": "Enregistr√© dans l'historique",
    "app.savedToHistoryDesc": "Votre repas a √©t√© enregistr√© avec succ√®s",
    "app.error": "Erreur",
    "app.errorDesc": "√âchec de l'analyse de l'image. Veuillez r√©essayer.",
    
    // Tabs
    "tabs.capture": "Capturer",
    "tabs.meals": "Repas",
    "tabs.history": "Historique",
    "tabs.info": "Info",
    "tabs.settings": "Param√®tres",
    
    // Auth
    "auth.welcome": "Bienvenue sur CarbSmart",
    "auth.welcomeDesc": "Connectez-vous ou cr√©ez un compte pour continuer",
    "auth.signIn": "Se connecter",
    "auth.signUp": "S'inscrire",
    "auth.email": "Email",
    "auth.password": "Mot de passe (min 6 caract√®res)",
    "auth.loading": "Chargement...",
    "auth.signupSuccess": "Compte cr√©√©",
    "auth.signupSuccessDesc": "Vous pouvez maintenant vous connecter avec vos identifiants",
    "auth.signOut": "Se d√©connecter",
    
    // Camera
    "camera.title": "Capturer la nourriture",
    "camera.takePhoto": "Prendre une photo",
    "camera.retake": "Reprendre",
    "camera.analyze": "Analyser",
    "camera.error": "Erreur de cam√©ra",
    "camera.errorDesc": "Impossible d'acc√©der √† la cam√©ra. Veuillez v√©rifier les permissions.",
    
    // Results
    "results.title": "R√©sultats",
    "results.estimatedCarbs": "Glucides estim√©s",
    "results.totalCarbs": "Total de glucides",
    "results.recommendedInsulin": "Dose d'insuline recommand√©e",
    "results.insulinNeeded": "Insuline n√©cessaire",
    "results.grams": "grammes",
    "results.units": "unit√©s",
    "results.carbs": "Glucides",
    "results.basedOnRatio": "Bas√© sur un ratio 1:{ratio}",
    "results.fromPhotos": "de {count} photos",
    "results.addMore": "Plus de photos",
    "results.done": "Termin√© - Calculer et enregistrer",
    "results.abort": "Annuler",
    "results.viewHistory": "Voir l'historique",
    "results.newPhoto": "Nouvelle photo",
    
    // History
    "history.title": "Calculs r√©cents",
    "history.noHistory": "Pas encore d'historique. Commencez par prendre une photo!",
    "history.meals": "repas",
    "history.mealsPlural": "repas",
    "history.carbs": "glucides",
    "history.insulin": "insuline",
    "history.insulinNeeded": "insuline n√©cessaire",
    "history.today": "Aujourd'hui",
    
    // Settings
    "settings.title": "Vos param√®tres",
    "settings.setupPin": "Configurer le contr√¥le parental",
    "settings.setupPinDesc": "Cr√©ez un code PIN √† 4 chiffres pour prot√©ger vos param√®tres",
    "settings.enterPin": "Entrer le PIN",
    "settings.confirmPin": "Confirmer le PIN",
    "settings.setPin": "D√©finir le PIN",
    "settings.unlockSettings": "Entrez le PIN pour acc√©der aux param√®tres",
    "settings.parentalControl": "Le contr√¥le parental est activ√©",
    "settings.unlock": "D√©verrouiller les param√®tres",
    "settings.settingsUnlocked": "Param√®tres d√©verrouill√©s",
    "settings.lockSettings": "Verrouiller les param√®tres",
    "settings.insulinRatio": "Ratio insuline/glucides (I:C)",
    "settings.insulinRatioDesc": "1 unit√© d'insuline couvre {ratio} grammes de glucides",
    "settings.comments": "Commentaires / Notes",
    "settings.commentsPlaceholder": "Ajoutez des notes ou commentaires sur la gestion de votre diab√®te...",
    "settings.commentsDesc": "Utilisez cet espace pour les rappels, notes du m√©decin ou autres informations importantes",
    "settings.invalidPin": "PIN invalide",
    "settings.invalidPinDesc": "Le PIN doit comporter exactement 4 chiffres",
    "settings.pinMismatch": "Les PINs ne correspondent pas",
    "settings.pinMismatchDesc": "Veuillez vous assurer que les deux PINs correspondent",
    "settings.pinSuccess": "PIN d√©fini avec succ√®s",
    "settings.pinSuccessDesc": "Votre PIN de contr√¥le parental a √©t√© cr√©√©",
    "settings.accessGranted": "Acc√®s autoris√©",
    "settings.accessGrantedDesc": "Bienvenue dans les param√®tres",
    "settings.incorrectPin": "PIN incorrect",
    "settings.incorrectPinDesc": "Veuillez r√©essayer",
    "settings.rereadDisclaimer": "Relire l'avertissement",
    
    // Meal Examples
    "meals.title": "Exemples de repas pour enfants",
    "meals.subtitle": "Repas courants avec estimations de glucides",
    "meals.breakfast": "Petit-d√©jeuner",
    "meals.lunch": "D√©jeuner",
    "meals.dinner": "D√Æner",
    "meals.supper": "Souper",
    "meals.disclaimer": "üí° Ce sont des estimations. V√©rifiez toujours avec les √©tiquettes nutritionnelles quand c'est possible.",
    "meals.insulinEstimate": "~{insulin}u d'insuline",
    
    // Meal names
    "meal.pancakes": "Cr√™pes au sirop",
    "meal.pancakesDesc": "2 cr√™pes moyennes avec 2 c. √† soupe de sirop",
    "meal.cereal": "C√©r√©ales au lait",
    "meal.cerealDesc": "1 tasse de c√©r√©ales avec 1/2 tasse de lait",
    "meal.toast": "Pain grill√© √† la confiture",
    "meal.toastDesc": "2 tranches de pain grill√© avec 1 c. √† soupe de confiture",
    "meal.oatmeal": "Gruau √† la banane",
    "meal.oatmealDesc": "1 tasse de gruau avec 1 petite banane",
    "meal.waffles": "Gaufres aux fruits",
    "meal.wafflesDesc": "2 gaufres avec 1/2 tasse de baies",
    "meal.bagel": "Bagel au fromage √† la cr√®me",
    "meal.bagelDesc": "1 petit bagel avec 2 c. √† soupe de fromage √† la cr√®me",
    "meal.pbSandwich": "Sandwich au beurre d'arachide",
    "meal.pbSandwichDesc": "2 tranches de pain avec 2 c. √† soupe de beurre d'arachide",
    "meal.macCheese": "Macaroni au fromage",
    "meal.macCheeseDesc": "1 tasse de macaroni au fromage pr√©par√©",
    "meal.nuggets": "Repas de croquettes de poulet",
    "meal.nuggetsDesc": "6 croquettes avec petites frites",
    "meal.grilledCheese": "Sandwich au fromage grill√©",
    "meal.grilledCheeseDesc": "2 tranches de pain avec fromage",
    "meal.pizza": "Part de pizza",
    "meal.pizzaDesc": "1 part de pizza au fromage",
    "meal.turkeyWrap": "Wrap √† la dinde",
    "meal.turkeyWrapDesc": "1 tortilla avec dinde et l√©gumes",
    "meal.roastChicken": "Poulet r√¥ti aux l√©gumes",
    "meal.roastChickenDesc": "Poulet cuit au four avec l√©gumes r√¥tis et petite pomme de terre",
    "meal.meatloaf": "Pain de viande avec accompagnements",
    "meal.meatloafDesc": "Tranche de pain de viande avec haricots verts et pur√©e",
    "meal.stirFry": "Saut√© de b≈ìuf",
    "meal.stirFryDesc": "Saut√© de b≈ìuf aux l√©gumes sur riz",
    "meal.salmon": "D√Æner de saumon cuit",
    "meal.salmonDesc": "Filet de saumon avec brocoli et riz",
    "meal.chickenParm": "Poulet parmigiana",
    "meal.chickenParmDesc": "Poulet pan√© avec fromage fondu sur spaghetti",
    "meal.porkChop": "D√Æner de c√¥telette de porc",
    "meal.porkChopDesc": "C√¥telette de porc grill√©e avec compote de pommes et ma√Øs",
    "meal.spaghetti": "Spaghetti aux boulettes",
    "meal.spaghettiDesc": "1 tasse de p√¢tes avec 3 boulettes",
    "meal.chickenRice": "Poulet au riz",
    "meal.chickenRiceDesc": "115g de poulet avec 3/4 tasse de riz",
    "meal.tacos": "Tacos",
    "meal.tacosDesc": "2 tacos mous avec viande et garnitures",
    "meal.fishSticks": "Repas de b√¢tonnets de poisson",
    "meal.fishSticksDesc": "5 b√¢tonnets de poisson avec pur√©e",
    "meal.hamburger": "Hamburger avec pain",
    "meal.hamburgerDesc": "1 burger avec pain et petit accompagnement",
    "meal.quesadilla": "Quesadilla au poulet",
    "meal.quesadillaDesc": "1 quesadilla avec fromage et poulet",
  },
  es: {
    // StartPage
    "start.welcome": "¬°Bienvenido a CarbSmart!",
    "start.description": "Toma fotos de comidas y obt√©n estimaciones instant√°neas de carbohidratos para ayudar a manejar la diabetes de tu hijo",
    "start.getStarted": "Comenzar",
    "start.selectLanguage": "Seleccionar idioma",
    "start.disclaimerTitle": "Aviso importante",
    "start.disclaimerText": "Esta aplicaci√≥n utiliza IA para estimar el contenido de carbohidratos de los alimentos a partir de im√°genes. Los resultados son solo estimaciones y pueden ser inexactos seg√∫n c√≥mo se tomen las fotos.\n\nUsa siempre esta herramienta con cuidado: debes comprender los conceptos b√°sicos del conteo de carbohidratos y el c√°lculo de insulina antes de usarla.\n\nLa aplicaci√≥n y sus creadores no se responsabilizan de ninguna decisi√≥n m√©dica o diet√©tica basada en estos resultados. Confirma siempre con un profesional de la salud en caso de duda.",
    "start.accept": "Entiendo y acepto",
    "start.decline": "Rechazar",
    
    // Main App
    "app.title": "CarbSmart",
    "app.subtitle": "¬°Toma una foto, conoce tus carbohidratos!",
    "app.analyzing": "Analizando...",
    "app.analyzingDesc": "La IA est√° examinando tu foto de comida",
    "app.analysisComplete": "¬°An√°lisis completo!",
    "app.analysisCompleteDesc": "Se encontraron {carbs}g de carbohidratos, sugiriendo {insulin} unidades de insulina",
    "app.savedToHistory": "Guardado en historial",
    "app.savedToHistoryDesc": "Tu comida ha sido guardada exitosamente",
    "app.error": "Error",
    "app.errorDesc": "Error al analizar la imagen. Por favor, int√©ntalo de nuevo.",
    
    // Tabs
    "tabs.capture": "Capturar",
    "tabs.meals": "Comidas",
    "tabs.history": "Historial",
    "tabs.info": "Info",
    "tabs.settings": "Ajustes",
    
    // Auth
    "auth.welcome": "Bienvenido a CarbSmart",
    "auth.welcomeDesc": "Inicia sesi√≥n o crea una cuenta para continuar",
    "auth.signIn": "Iniciar sesi√≥n",
    "auth.signUp": "Registrarse",
    "auth.email": "Correo electr√≥nico",
    "auth.password": "Contrase√±a (m√≠n. 6 caracteres)",
    "auth.loading": "Cargando...",
    "auth.signupSuccess": "Cuenta creada",
    "auth.signupSuccessDesc": "Ahora puedes iniciar sesi√≥n con tus credenciales",
    "auth.signOut": "Cerrar sesi√≥n",
    
    // Camera
    "camera.title": "Capturar comida",
    "camera.takePhoto": "Tomar foto",
    "camera.retake": "Retomar",
    "camera.analyze": "Analizar",
    "camera.error": "Error de c√°mara",
    "camera.errorDesc": "No se pudo acceder a la c√°mara. Por favor, verifica los permisos.",
    
    // Results
    "results.title": "Resultados",
    "results.estimatedCarbs": "Carbohidratos estimados",
    "results.totalCarbs": "Total de carbohidratos",
    "results.recommendedInsulin": "Dosis de insulina recomendada",
    "results.insulinNeeded": "Insulina necesaria",
    "results.grams": "gramos",
    "results.units": "unidades",
    "results.carbs": "Carbohidratos",
    "results.basedOnRatio": "Basado en ratio 1:{ratio}",
    "results.fromPhotos": "de {count} fotos",
    "results.addMore": "M√°s fotos",
    "results.done": "Listo - Calcular y guardar",
    "results.abort": "Abortar",
    "results.viewHistory": "Ver historial",
    "results.newPhoto": "Nueva foto",
    
    // History
    "history.title": "C√°lculos recientes",
    "history.noHistory": "A√∫n no hay historial. ¬°Comienza tomando una foto!",
    "history.meals": "comida",
    "history.mealsPlural": "comidas",
    "history.carbs": "carbohidratos",
    "history.insulin": "insulina",
    "history.insulinNeeded": "insulina necesaria",
    "history.today": "Hoy",
    
    // Settings
    "settings.title": "Tus ajustes",
    "settings.setupPin": "Configurar control parental",
    "settings.setupPinDesc": "Crea un PIN de 4 d√≠gitos para proteger tus ajustes",
    "settings.enterPin": "Ingresa el PIN",
    "settings.confirmPin": "Confirma el PIN",
    "settings.setPin": "Establecer PIN",
    "settings.unlockSettings": "Ingresa el PIN para acceder a los ajustes",
    "settings.parentalControl": "El control parental est√° activado",
    "settings.unlock": "Desbloquear ajustes",
    "settings.settingsUnlocked": "Ajustes desbloqueados",
    "settings.lockSettings": "Bloquear ajustes",
    "settings.insulinRatio": "Ratio insulina/carbohidratos (I:C)",
    "settings.insulinRatioDesc": "1 unidad de insulina cubre {ratio} gramos de carbohidratos",
    "settings.comments": "Comentarios / Notas",
    "settings.commentsPlaceholder": "A√±ade notas o comentarios sobre el manejo de tu diabetes...",
    "settings.commentsDesc": "Usa este espacio para recordatorios, notas del m√©dico u otra informaci√≥n importante",
    "settings.invalidPin": "PIN inv√°lido",
    "settings.invalidPinDesc": "El PIN debe tener exactamente 4 d√≠gitos",
    "settings.pinMismatch": "Los PINs no coinciden",
    "settings.pinMismatchDesc": "Por favor, aseg√∫rate de que ambos PINs coincidan",
    "settings.pinSuccess": "PIN establecido con √©xito",
    "settings.pinSuccessDesc": "Tu PIN de control parental ha sido creado",
    "settings.accessGranted": "Acceso concedido",
    "settings.accessGrantedDesc": "Bienvenido a ajustes",
    "settings.incorrectPin": "PIN incorrecto",
    "settings.incorrectPinDesc": "Por favor, int√©ntalo de nuevo",
    "settings.rereadDisclaimer": "Releer aviso",
    
    // Meal Examples
    "meals.title": "Ejemplos de comidas para ni√±os",
    "meals.subtitle": "Comidas comunes con conteos estimados de carbohidratos",
    "meals.breakfast": "Desayuno",
    "meals.lunch": "Almuerzo",
    "meals.dinner": "Cena",
    "meals.supper": "Cena ligera",
    "meals.disclaimer": "üí° Estas son estimaciones. Siempre verifica con las etiquetas nutricionales cuando sea posible.",
    "meals.insulinEstimate": "~{insulin}u de insulina",
    
    // Meal names
    "meal.pancakes": "Panqueques con jarabe",
    "meal.pancakesDesc": "2 panqueques medianos con 2 cdas de jarabe",
    "meal.cereal": "Cereal con leche",
    "meal.cerealDesc": "1 taza de cereal con 1/2 taza de leche",
    "meal.toast": "Tostada con mermelada",
    "meal.toastDesc": "2 rebanadas de pan tostado con 1 cda de mermelada",
    "meal.oatmeal": "Avena con pl√°tano",
    "meal.oatmealDesc": "1 taza de avena con 1 pl√°tano peque√±o",
    "meal.waffles": "Waffles con fruta",
    "meal.wafflesDesc": "2 waffles con 1/2 taza de bayas",
    "meal.bagel": "Bagel con queso crema",
    "meal.bagelDesc": "1 bagel peque√±o con 2 cdas de queso crema",
    "meal.pbSandwich": "S√°ndwich de mantequilla de man√≠",
    "meal.pbSandwichDesc": "2 rebanadas de pan con 2 cdas de mantequilla de man√≠",
    "meal.macCheese": "Macarrones con queso",
    "meal.macCheeseDesc": "1 taza de macarrones con queso preparados",
    "meal.nuggets": "Comida de nuggets de pollo",
    "meal.nuggetsDesc": "6 nuggets con papas fritas peque√±as",
    "meal.grilledCheese": "S√°ndwich de queso a la plancha",
    "meal.grilledCheeseDesc": "2 rebanadas de pan con queso",
    "meal.pizza": "Porci√≥n de pizza",
    "meal.pizzaDesc": "1 porci√≥n de pizza de queso",
    "meal.turkeyWrap": "Wrap de pavo",
    "meal.turkeyWrapDesc": "1 tortilla con pavo y vegetales",
    "meal.roastChicken": "Pollo asado con vegetales",
    "meal.roastChickenDesc": "Pollo horneado con vegetales asados y papa peque√±a",
    "meal.meatloaf": "Pastel de carne con acompa√±amientos",
    "meal.meatloafDesc": "Porci√≥n de pastel de carne con jud√≠as verdes y pur√©",
    "meal.stirFry": "Salteado de carne",
    "meal.stirFryDesc": "Salteado de carne con vegetales sobre arroz",
    "meal.salmon": "Cena de salm√≥n horneado",
    "meal.salmonDesc": "Filete de salm√≥n con br√≥coli y arroz",
    "meal.chickenParm": "Pollo parmesano",
    "meal.chickenParmDesc": "Pollo empanado con queso derretido sobre espagueti",
    "meal.porkChop": "Cena de chuleta de cerdo",
    "meal.porkChopDesc": "Chuleta de cerdo a la parrilla con pur√© de manzana y ma√≠z",
    "meal.spaghetti": "Espagueti con alb√≥ndigas",
    "meal.spaghettiDesc": "1 taza de pasta con 3 alb√≥ndigas",
    "meal.chickenRice": "Pollo con arroz",
    "meal.chickenRiceDesc": "115g de pollo con 3/4 taza de arroz",
    "meal.tacos": "Tacos",
    "meal.tacosDesc": "2 tacos suaves con carne y coberturas",
    "meal.fishSticks": "Comida de palitos de pescado",
    "meal.fishSticksDesc": "5 palitos de pescado con pur√©",
    "meal.hamburger": "Hamburguesa con pan",
    "meal.hamburgerDesc": "1 hamburguesa con pan y acompa√±amiento peque√±o",
    "meal.quesadilla": "Quesadilla de pollo",
    "meal.quesadillaDesc": "1 quesadilla con queso y pollo",
  },
};

export const LanguageProvider = ({ children }: { children: ReactNode }) => {
  const [language, setLanguage] = useState<Language>("en");

  const t = (key: string, params?: Record<string, string | number>): string => {
    let text = translations[language][key] || key;
    
    if (params) {
      Object.entries(params).forEach(([param, value]) => {
        text = text.replace(`{${param}}`, String(value));
      });
    }
    
    return text;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error("useLanguage must be used within LanguageProvider");
  }
  return context;
};
